// For format details, see https://aka.ms/vscode-remote/devcontainer.json or the definition README at
// https://github.com/microsoft/vscode-dev-containers/tree/master/containers/go
{
	"name": "Go",
	"dockerFile": "Dockerfile",
	"runArgs": [
		// Mount go mod cache
		"-v", "keda-gomodcache:/go/pkg",
		// Cache vscode exentsions installs and homedir
		"-v", "keda-vscodecache:/root/.vscode-server",

		// Mount docker socket for docker builds
		"-v", "/var/run/docker.sock:/var/run/docker.sock",

		"--cap-add=SYS_PTRACE", "--security-opt", "seccomp=unconfined"
	],
	"features": {
		"ghcr.io/devcontainers/features/azure-cli:1": {},
		"ghcr.io/devcontainers/features/docker-outside-of-docker:1": {},
		"ghcr.io/devcontainers-contrib/features/kubectl-asdf:2": {}
	},
	"remoteUser": "vscode",

	// Use 'settings' to set *default* container specific settings.json values on container create.
	// You can edit these settings after create using File > Preferences > Settings > Remote.
	"settings": {
		"terminal.integrated.shell.linux": "/bin/bash",
		"go.gopath": "/go"
	},

	// Add the IDs of extensions you want installed when the container is created in the array below.
	"extensions": [
		"golang.go"
	]
}
